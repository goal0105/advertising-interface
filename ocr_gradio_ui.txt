
# OCR UI Interface for Planning & Building Notices using Gradio
# Based on a structured design with sidebar, dual-panel text display, and editing tools

import gradio as gr

# Placeholder variables for initial OCR output and cleaned text
ocr_raw_text = "Sample OCR output text extracted from the uploaded document."
gpt_cleaned_text = "The text after GPT-based cleanup, ready for editing and formatting."

# Function to simulate applying layout settings (font size, spacing etc.)
def apply_layout(font_size, line_mode, line_height):
    return f"\n[Layout Settings Applied]\nFont Size: {font_size}\nLine Mode: {line_mode}\nLine Height: {line_height}"

# Gradio Interface starts here
with gr.Blocks() as demo:
    # Header Section
    gr.Markdown("## Planning & Building Notices â€“ OCR Interface")
    gr.Markdown("Upload a scanned PDF or image of a statutory notice. View OCR result, edit, and apply formatting rules.")

    # Upload Section
    with gr.Row():
        upload = gr.File(label="ðŸ“„ Upload PDF or Image", file_types=[".pdf", ".png", ".jpg"])
        upload_btn = gr.Button("Upload")

    gr.Markdown("---")

    # Main Content Area - two columns side by side
    with gr.Row():
        with gr.Column():
            gr.Markdown("### Original OCR Text")
            ocr_box = gr.Textbox(value=ocr_raw_text, lines=12, interactive=False, label="OCR Output")

        with gr.Column():
            gr.Markdown("### Cleaned & Editable Text")
            edit_box = gr.Textbox(value=gpt_cleaned_text, lines=12, interactive=True, label="Cleaned Text")
            gr.Button("ðŸ”„ Restore Original")

    gr.Markdown("---")

    # Sidebar Panel with formatting rules
    with gr.Row():
        with gr.Column(scale=1):
            gr.Markdown("### Layout Settings")
            font_size = gr.Radio(["5.5pt", "7pt", "10pt"], label="Font Size", value="7pt")
            line_mode = gr.Radio(["Continuous", "Spaced"], label="Line Mode", value="Spaced")
            line_height = gr.Radio(["7pt", "9pt", "12pt"], label="Line Height", value="12pt")
            apply_btn = gr.Button("Apply Layout Rules")

        with gr.Column(scale=2):
            layout_result = gr.Textbox(label="Layout Summary")
            apply_btn.click(apply_layout, inputs=[font_size, line_mode, line_height], outputs=layout_result)

    gr.Markdown("---")
    gr.Button("âœ… Create Formatted Document")

# Launch the interface
if __name__ == "__main__":
    demo.launch()
